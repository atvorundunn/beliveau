import numpy as np
import h5py

from sklearn.cluster import DBSCAN
from sklearn import metrics
from sklearn.datasets.samples_generator import make_blobs
from sklearn.preprocessing import StandardScaler

# getting access to hdf5 file, reader view
filename = 'geo_test2.hdf5'
f = h5py.File(filename, 'r+')
group_key = list(f.keys())[0]
data = list(f[group_key]) #put data from file into seperate list to fit

# initializing dbscan, fit to data and create clusters
db = DBSCAN(eps=65, min_samples=.0001)
data = db.fit(data) #fit data from hdf5 file
core_samples_mask = np.zeros_like(db.labels_, dtype=bool)
core_samples_mask[db.core_sample_indices_] = True
labels = db.labels_

#close file
f.close()
